<MesswertWidget>:
    lbl: lbl
    tgl_btn_measurement: tgl_btn_measurement
    tgl_btn_logging: tgl_btn_logging

    FloatLayout:
        size: root.width, root.height

        Label:
            id: lbl

            size_hint: (0.5, 0.2)
            pos_hint: {'x': 0.25, 'y':0.5}

            text: root.value
            font_size: 50

        BoxLayout:
            size_hint: (1,0.1)
            pos_hint: {'x':0, 'y':0}

            ToggleButton:
                id: tgl_btn_measurement

                text: "Start" if self.state is "normal" else "Stop"
                on_press: root.startStopMeasurement()

            ToggleButton:
                id: tgl_btn_logging

                text: "Enable Logging" if self.state is "normal" else "Disable Logging"
                on_press: root.startStopLogging()

            Button:
                text: "Save last log"
                on_press: root.saveLog()

            Button:
                text: "Open last log\nin LibreOffice"
                on_press: root.openLog()

            Button:
                text: "Settings"
                on_press:
                    from kivy.uix.popup import Popup
                    from kivy.uix.label import Label
                    if tgl_btn_measurement.state == "down" or tgl_btn_logging.state == "down": Popup(title='Warning', content=Label(text="Stop the measurement and disable logging to open the settings screen!"), size_hint=(None, None), size=(550,100)).open()
                    else: app.open_settings()

<SaveDialog>:
    text_input: text_input
    filechooser: filechooser

    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserIconView:
            id: filechooser
            path:
            on_selection: text_input.text = self.selection and self.selection[0] or ''

        TextInput:
            id: text_input
            size_hint_y: None
            height: 30
            multiline: False

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Save"
                on_release: root.save(filechooser.path, text_input.text)